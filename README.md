![Videotogif (1)](https://user-images.githubusercontent.com/65433193/118928788-a7f80800-b97e-11eb-958e-e40e1098af2f.gif)

<br/>
<h1 align="center">👒 <a href="https://kiraku.app/about">Kiraku</a></h1><br/>

<p align="center">
  <a href="https://kiraku.app/about"><img src="https://user-images.githubusercontent.com/65433193/119437879-f5e38600-bd59-11eb-838a-5cbe7526edde.png" height="100px;" /></a>
</p>

<h3 align="center">ファッションを'着'楽に。</h3><br/>

<p align="center">「Kiraku」は初心者〜上級者まで誰でも気楽に使えるファッション共有 SNS です。</p><br/>

## URL

[App](https://kiraku.app/about)
- こちらのページよりテストログインが可能です。
- ファッション投稿サイトとありますが、テストログインアカウントではファッションに限らず自由に機能をお試しください。

[GitHub](https://github.com/s-kawabe/Kiraku)

[Storybook](https://s-kawabe.github.io/Kiraku/)

[Figma 設計図(UIモデル/画面遷移図/ER図)](https://www.figma.com/file/PYtxmgifElAhVAohiSVXdP/Blueprint?node-id=2:1)

[Figma デザインカンプ](https://www.figma.com/file/rjzfXejSYZTrOwRx3iND7J/DesignCamp?node-id=0%3A1)

<br/>

## Technologies
<p align="left">
  <a href="https://www.typescriptlang.org/"><img src="https://cdn.worldvectorlogo.com/logos/typescript.svg" height="50px;" /></a>
  <a href="https://nextjs.org/"><img src="https://cdn.worldvectorlogo.com/logos/nextjs-3.svg" height="50px;" /></a>
  <a href="https://ja.reactjs.org/"><img src="https://cdn.worldvectorlogo.com/logos/react-2.svg" height="50px;" /></a>
  <a href="https://firebase.google.com/?hl=ja"><img src="https://cdn.worldvectorlogo.com/logos/firebase-1.svg" height="50px;" /></a>
  <a href="https://graphql.org/"><img src="https://cdn.worldvectorlogo.com/logos/graphql.svg" height="50px;" /></a>
  <a href="https://hasura.io/"><img src="https://seeklogo.com/images/H/hasura-logo-B718105639-seeklogo.com.png" height="50px;" /></a>
  <a href="https://www.apollographql.com/"><img src="https://cdn.worldvectorlogo.com/logos/apollo-graphql-1.svg" height="50px;" /></a>
</p>
<p align="left">
  <a href="https://www.figma.com/"><img src="https://cdn.worldvectorlogo.com/logos/figma-1.svg" height="50px;" /></a>
  <a href="https://vercel.com/"><img src="https://user-images.githubusercontent.com/65433193/118944114-3b393980-b98f-11eb-84a5-fc9a1db8ea6b.png" height="50px;" /></a
  <a href="https://eslint.org/"><img src="https://cdn.worldvectorlogo.com/logos/eslint-1.svg" height="50px;" /></a>
  <a href="https://prettier.io/"><img src="https://cdn.worldvectorlogo.com/logos/prettier-2.svg" height="50px;" /></a>
  <a href="https://storybook.js.org/"><img src="https://user-images.githubusercontent.com/65433193/118938590-c9122600-b989-11eb-957c-6290edb48eeb.png" height="50px;" /></a>
  <a href="https://emotion.sh/docs/introduction"><img src="https://user-images.githubusercontent.com/65433193/118942597-d8936e00-b98d-11eb-9eb9-46ef3d47a24b.png" height="50px;" /></a>
  <a href="https://chakra-ui.com/"><img src="https://bestofjs.org/logos/chakra-ui.svg" height="50px;"></a>
  <a href="https://jestjs.io/ja/"><img src="https://user-images.githubusercontent.com/65433193/118944023-265ca600-b98f-11eb-83d8-5635a4f69b9a.png" height="50px;" /></a>
</p><br />

|   領域   |  技術やツール  |
| ---- | ---- |
|  デザイン/設計  |  Figma/Storybook  |
|  フロントエンド  |  Next.js(React)/TypeScript/ |
|  バックエンド  |  Firebase/Hasura(PostgreSQL) |
|  状態管理/データフェッチ  |  Apollo |
|  スタイル  | ChakraUI/Emotion |
|  Hosting  |  Vercel/Heroku |
|  API Server  | Firebase Functions |
|  認証  |  Firebase Authentication |
|  ストレージ  |  Firebase Storage |
|  Linter/Formatter  |  ESLint/Prettier |
|  Testing  |  Jest/React Testing Library |

### その他ライブラリ等
- react-hook-form,yup(フォームバリデーション)
- draft-js,react-draft-wysiwyg(WYSIWYGエディタ実装)
- browser-image-compression(画像圧縮)
- react-image-crop(画像トリミング)
- husky(pre commit時のコードlint)
- framer-motion(CSSアニメーション)
- react-tag-input(タグUI実装)

<br/>

## Concept
### "着"楽にファッション。
より多くの人にファッションを"気楽"に”着て”ほしいという思いから、その2つを掛け合わせた造語をキャッチコピーにしました。<br />

私自身が、現代のファッション系SNSをユーザとして使って感じていた課題は「**敷居が高い**」ということです。<br />
他撮り＋高画質＋フルコーディネートの写真ばかりのSNSは、ファッション初心者にとっては参入障壁が高く、<br />
幅広いユーザ獲得に繋がらないのでは、と感じました。<br />

Kirakuではそういった課題を解決すべく幅広いユーザをターゲットとしています。<br />
初心者でも、ファッションの一部分でも文字通り気楽に投稿していただくことで、参入障壁を低くし<br />
より多くの人にファッションを楽しんでもらう機会を与えたいと考え制作しました。<br />

<br/>

## Functions
### Aboutページ
Aboutページからアプリの全体像と使用方法を知ることができる。<br  />

### サインイン/サインアップ
ユーザは**Twitter**, **Google**, **Email**での３種類の方法でアカウント作成が可能。<br />
FirebaseAuthenticationによって認証を行う。
それぞれの入力フォームにはreact-hook-formを採用しており、再レンダリングやバリデーションを考慮して実装。

### ポスト
1枚の画像付きの短めの文章(250文字以内)で投稿が可能なコンテンツ。<br />
投稿した画像はFirebaseStorageにアップロードされる。<br />
また、投稿前にbrowser-image-compressionを使い圧縮してから格納している。(ブログも同様)

### ブログ
画像と文章量に制限がなく投稿ができるコンテンツ。<br />
ブログ感覚で長めの文章を書きたいユーザ向け。<br />
リッチエディタをdraft-js, react-draft-wysiwygによって実装。　

### ブランド/トピックス
ポストとブログには、ブランドとトピックスのタグを付与できる。

### コメント
ポストとブログにはログイン済みユーザがコメントを付けられる。<br />
GraphQLのSubscriptionsを用いて実装。

### いいね
ポストとブログにはログイン済みユーザがいいねをできる。<br />
いいね時のCSSアニメーションにはframer-motionを使用。　

### ユーザプロフィール
ユーザ個人のプロフィール画面からは自分の投稿したコンテンツ、自分がいいねしたコンテンツ、<br />
フォロー中ユーザとフォロワーが閲覧可能。<br />
また、自分自身のプロフィール編集が可能で、サムネイル画像の変更では任意の画像を任意のサイズで登録できる。<br />
この際の画像トリミング処理にはreact-image-cropを使用。

### ユーザフォロー
他ユーザに対してフォローをすることが可能。<br />

### 検索
ヘッダーの検索バーへ文字を入力し、虫眼鏡マークを押すことでコンテンツの検索が可能。
- ポストの内容
- ブログのタイトル
- ユーザー名
をそれぞれ検索結果に出力する。

<br/>

## Impressions

### 設計の進め方
① コンセプトやターゲットを簡単に考える(紙やスプレッドシートで作成)<br />
② 機能の一覧を考える(マインドマップ等で作成)<br />
③ 機能から考えられるUIのモデルと画面遷移を考える(紙やFigma上で作成)<br />
④ ワイヤーフレーム、デザインカンプを作成(Figmaで作成、今回はデザインカンプのみ)<br />
⑤ 作ったUIモデルやワイヤーから必要なデータを考えER図を作成(draw.ioを使用)<br />

### ER図
![ERのコピー](https://user-images.githubusercontent.com/65433193/119488716-d1a59a80-bd95-11eb-9e31-3c20d9d04850.jpg)


### 苦労した点、悩んだ点
- 全ページフルレスポンシブ対応
- オブジェクト指向UIを意識したデザイン
- TypeScriptをReactで使う際の型定義
- コンポーネント分割の粒度について
- APIにGraphQLを採用したこと
- FirebaseAuthとHasura連携時のjwt認証
- HasuraのPermissions設定
- Apolloによるグローバルなステート管理とローカルなステート管理
- Apolloによるデータのcacheの取り扱い
- リッチエディタでの記述データをどうDBに格納するか
- SSG/ISRページのデータ更新時の挙動
- 再レンダリングの抑制について(useMemo,React.memo,useCallback等)
- LighthouseによるCoreWebVitalsのポイント監視と改善方法
- 非同期処理
- 設計のやり方

### 今後の改善点
以下にまとめています。
https://github.com/s-kawabe/Kiraku/issues/65#issue-907892241




